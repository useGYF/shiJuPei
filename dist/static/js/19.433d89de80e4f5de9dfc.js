webpackJsonp([19],{837:function(t,e,a){function i(t){a(917)}var n=a(1)(a(862),a(965),i,"data-v-6e483256",null);t.exports=n.exports},862:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),n=a(8);e.default={name:"onlinelist",data:function(){return{type:"PM2.5",labelType:"PM2.5",ALLdata:[],tableData:[],allData:[],currentRow:null,pagesize:10,currentPage:1,totalCount:0,pickerOptions1:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},value1:"",value2:""}},created:function(){this.InitializationDataMethod(),i.a.$on("refreshDustTarget",this.refreshTable)},mounted:function(){},methods:{compare:function(t){return function(e,a){var i=e[t];return a[t]-i}},InitializationDataMethod:function(){var t=this;n.a.GetDustHourRanking().then(function(e){var a=e.data.Data;t.SetDataList(a,t.type),t.totalCount=t.ALLdata.length,t.allData=t.ALLdata,t.setPageTable(10,1)})},getPollution:function(t){var e=t;switch(t.toUpperCase()){case"PM2.5":e="pm25";break;case"PM10":e="pm10";break;case"TEMP":e="temp";break;case"HUMI":e="humi";break;case"WINDSPEED":e="windspeed";break;case"WINDDIRECTION":e="winddirection"}return e},getPollutionTarget:function(t){var e=t;switch(t.toUpperCase()){case"INDEX":e="综指";break;case"TEMP":e="温度";break;case"HUMI":e="湿度";break;case"WINDSPEED":e="风级";break;case"WINDDIRECTION":e="风向"}return console.log(e),e},RowCurrentChange:function(t){this.currentRow=t,i.a.$emit("locationClick","layer_gd",this.currentRow,this.type)},SetDataList:function(t,e){var a=this,i=e;this.data=t,this.ALLdata=[];var n=1;this.getPointByType(this.ptType).sort(this.compare(this.getPollution(e))).forEach(function(t){var e={};e.ranking=n++,e.name=t.name,e.deviceid=t.deviceid,e.latitude=t.latitude,e.longitude=t.longitude,e.sourcetype=t.sourcetype,e.Grid=t.gridname||t.gridName||t.firstgridname||"----",e.aqi=t[a.getPollution(i)]||"--",a.ALLdata.push(e)})},handleSizeChange:function(t){},handleCurrentChange:function(t){this.setPageTable(10,t),console.log(t)},setPageTable:function(t,e){for(var a=[],i=t*(e-1),n=0;n<t&&!(i+n+1>this.allData.length);n++)a.push(this.allData[i+n]);this.tableData=a},getPointByType:function(t){var e=[],a=this.data;if(a)for(var i=0,n=a.length;i<n;i++){var r=a[i];r.type===t&&e.push(a[i])}return e},btnClickEvent:function(){var t=this,e=this,a=this.TimeConversion("yyyy-MM-dd hh:00:00",this.value2);n.a.GetDustHourRanking(a).then(function(a){var n=a.data.Data;n="string"==typeof n?JSON.parse(n):n,t.SetDataList(n,t.type),t.totalCount=t.ALLdata.length,t.allData=t.ALLdata,t.setPageTable(10,1),i.a.$emit("loadCumulative",n,"layer_gd",e.type,"name")})},refreshTable:function(t){this.type=t,this.labelType=this.Tochangelabeltype(t),this.SetDataList(this.data,t),this.totalCount=this.ALLdata.length,this.allData=this.ALLdata,this.setPageTable(10,1)},Tochangelabeltype:function(t){var e=t;switch(t.toUpperCase()){case"AQI":e="AQI";break;case"PM25":e="PM2.5";break;case"PM10":e="PM10";break;case"SO2":e="SO2";break;case"NO2":e="NO2";break;case"CO":e="CO";break;case"O3":e="O3";break;case"COMPLEXINDEX":e="综指";break;case"TEMP":e="温度";break;case"HUMI":e="湿度";break;case"WINDANGLE":e="风向";break;case"WINDSPEED":e="风力"}return e},switchRender:function(t){this.type=t,this.labelType=this.getPollutionTarget(t),this.setdata(this.data,this.type)},TimeConversion:function(t,e){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in a)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return t}},components:{}}},893:function(t,e,a){e=t.exports=a(831)(!1),e.push([t.i,".OnlineList[data-v-6e483256]{width:430px;height:auto}.OnlineList img[data-v-6e483256]{position:absolute;top:40%;left:-17px;cursor:pointer;float:left}.OnlineList .main[data-v-6e483256]{height:auto}.OnlineList .main .kbiaoti[data-v-6e483256]{padding:10px 0}.OnlineList .main .bluexian[data-v-6e483256]{width:26px;border:1px solid #1080cc;margin:0 auto}.OnlineList .main .first[data-v-6e483256]{width:100%;height:44px;margin-top:30px}.OnlineList .main .first .tables[data-v-6e483256]{float:left;margin-left:14px}.OnlineList .main .first .tables a[data-v-6e483256]{padding:0 15px;float:left;text-decoration:none;color:#666;display:inline-block;line-height:34px;width:100px;height:34px;margin-right:16px;border:1px solid #ccc;background:#fff;border-radius:2px}.OnlineList .main .first .btnns[data-v-6e483256],.OnlineList .main .first .shijian[data-v-6e483256]{float:left;margin-left:6px}.OnlineList .main .first .btnns button[data-v-6e483256]{border:none;width:80px;height:34px;background:#4696ff;color:#fff;border-radius:4px}.OnlineList .main .tqbiaoti[data-v-6e483256]{width:100%;height:22px;padding-left:20px;text-align:left;margin-left:16px;border-left:3px solid #2a6496}.OnlineList .main .table_container[data-v-6e483256]{margin-left:16px}",""])},917:function(t,e,a){var i=a(893);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(832)("1d651a54",i,!0,{})},965:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"OnlineList"},[a("div",{staticClass:"main"},[a("div",{staticClass:"first"},[t._m(0),t._v(" "),a("div",{staticClass:"shijian"},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",align:"right","picker-options":t.pickerOptions1},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1)]),t._v(" "),a("div",{staticClass:"btnns"},[a("button",{on:{click:t.btnClickEvent}},[t._v("查询")])])]),t._v(" "),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"400px"},attrs:{data:t.tableData,border:"",stripe:"","highlight-current-row":""},on:{"current-change":t.RowCurrentChange}},[a("el-table-column",{attrs:{property:"ranking",label:"排名",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"Grid",label:"网格名称",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"名称",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{property:"aqi",label:t.labelType,width:"100"}})],1),t._v(" "),a("div",{staticClass:"Pagination",staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pagesize,layout:"total, prev, pager, next",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tables"},[a("a",{staticStyle:{background:"#fff"}},[t._v("当前时间")])])}]}}});